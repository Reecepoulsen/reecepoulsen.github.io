<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lazy Load Example</title>
    <style>
        .loading{
            width: 400px;
            height: 400px;
            background-color: lightgrey;
        }
    </style>
</head>
<body>
    <h1></h1>
    <div class="loading"><img data-src="http://unsplash.it/400" alt=""></div>
    <div class="loading"><img data-src="http://unsplash.it/401" alt=""></div>
    <div class="loading"><img data-src="http://unsplash.it/402" alt=""></div>
    <div class="loading"><img data-src="http://unsplash.it/403" alt=""></div>
    <div class="loading"><img data-src="http://unsplash.it/404" alt=""></div>
    <div class="loading"><img data-src="http://unsplash.it/405" alt=""></div>
</body>
    <script>
        const imagesToLoad = document.querySelectorAll("img[data-src]");

        const imgOptions = {
            threshold:0,
            rootMargin: "0px 0px 50px 0px"
        };
        
        const loadImages = (image) => {
            image.setAttribute('src', image.getAttribute('data-src'));
            image.onload = () => {image.removeAttribute('data-src')}
        };
        
        if('IntersectionObserver' in window) {
            const observer = new IntersectionObserver((images, observer) => {
              images.forEach((image) => {
                if(image.isIntersecting) {
                  loadImages(image.target);
                  observer.unobserve(image.target);
                }
              });
            });
            imagesToLoad.forEach((img) => {
              observer.observe(img);
            });
          } else {
            imagesToLoad.forEach((img) => {
              loadImages(img);
            });
          }
          </script>
</html>